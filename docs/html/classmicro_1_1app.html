<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Micro++: micro::app Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Micro++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>micro</b></li><li class="navelem"><a class="el" href="classmicro_1_1app.html">app</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmicro_1_1app-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">micro::app Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><b>app</b> powers all micro++ web applications.  
 <a href="classmicro_1_1app.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="app_8hpp_source.html">app.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd97245a7ea7ed4abf75b7ea8b2545bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#acd97245a7ea7ed4abf75b7ea8b2545bb">app</a> (std::string port=&quot;8080&quot;, std::string address=&quot;0.0.0.0&quot;)</td></tr>
<tr class="memdesc:acd97245a7ea7ed4abf75b7ea8b2545bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for a micro++ web application.  <a href="#acd97245a7ea7ed4abf75b7ea8b2545bb">More...</a><br /></td></tr>
<tr class="separator:acd97245a7ea7ed4abf75b7ea8b2545bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc80d3512a4de218950e306a424b61f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#accc80d3512a4de218950e306a424b61f">set_timeout</a> (int time)</td></tr>
<tr class="memdesc:accc80d3512a4de218950e306a424b61f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum time that the application is willing to wait for runaway threads to finish.  <a href="#accc80d3512a4de218950e306a424b61f">More...</a><br /></td></tr>
<tr class="separator:accc80d3512a4de218950e306a424b61f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205e18d042be96f5268623e123a9f134"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#a205e18d042be96f5268623e123a9f134">toggle_debug_mode</a> (bool toggle=true)</td></tr>
<tr class="memdesc:a205e18d042be96f5268623e123a9f134"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggles debug mode.  <a href="#a205e18d042be96f5268623e123a9f134">More...</a><br /></td></tr>
<tr class="separator:a205e18d042be96f5268623e123a9f134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb88f6fae763dbab6d8bc44ad26ff673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#abb88f6fae763dbab6d8bc44ad26ff673">toggle_logging_mode</a> (bool toggle=true)</td></tr>
<tr class="memdesc:abb88f6fae763dbab6d8bc44ad26ff673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggles logging mode.  <a href="#abb88f6fae763dbab6d8bc44ad26ff673">More...</a><br /></td></tr>
<tr class="separator:abb88f6fae763dbab6d8bc44ad26ff673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fcc51d0124373d86d98d0a6a6cc343a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#a1fcc51d0124373d86d98d0a6a6cc343a">run</a> ()</td></tr>
<tr class="memdesc:a1fcc51d0124373d86d98d0a6a6cc343a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the web application and blocks until SIGINT (ctrl-c) is received.  <a href="#a1fcc51d0124373d86d98d0a6a6cc343a">More...</a><br /></td></tr>
<tr class="separator:a1fcc51d0124373d86d98d0a6a6cc343a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d1e1b6c43ae428e8d054bef5456ecf0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d1e1b6c43ae428e8d054bef5456ecf0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>add_route</b> (<a class="el" href="classmicro_1_1url__route.html">micro::url_route</a>)</td></tr>
<tr class="separator:a4d1e1b6c43ae428e8d054bef5456ecf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4145e8f9539d65225c0ba1fb6ea325d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#ae4145e8f9539d65225c0ba1fb6ea325d">add_route</a> (std::string route_specifier, callback func, std::vector&lt; std::string &gt; methods={&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;})</td></tr>
<tr class="memdesc:ae4145e8f9539d65225c0ba1fb6ea325d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a callback function to the specified url.  <a href="#ae4145e8f9539d65225c0ba1fb6ea325d">More...</a><br /></td></tr>
<tr class="separator:ae4145e8f9539d65225c0ba1fb6ea325d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770e1c9cf1e649c37dd5bfc0e42a6562"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a770e1c9cf1e649c37dd5bfc0e42a6562"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>add_module</b> (module &amp;mod, std::string prefix=&quot;&quot;)</td></tr>
<tr class="separator:a770e1c9cf1e649c37dd5bfc0e42a6562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add07670b87b2dc2c7758aabdb365a2a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#add07670b87b2dc2c7758aabdb365a2a8">set_static_root</a> (std::string static_root)</td></tr>
<tr class="memdesc:add07670b87b2dc2c7758aabdb365a2a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the static root directory - the directory in which all static files will be looked for.  <a href="#add07670b87b2dc2c7758aabdb365a2a8">More...</a><br /></td></tr>
<tr class="separator:add07670b87b2dc2c7758aabdb365a2a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9175d0dfb4eff9238bda0eacb95ec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmicro_1_1app.html#a6b9175d0dfb4eff9238bda0eacb95ec2">set_pool_size</a> (int size)</td></tr>
<tr class="memdesc:a6b9175d0dfb4eff9238bda0eacb95ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the thread pool size.  <a href="#a6b9175d0dfb4eff9238bda0eacb95ec2">More...</a><br /></td></tr>
<tr class="separator:a6b9175d0dfb4eff9238bda0eacb95ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:add347039cf288d507c01613d32b65cd1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add347039cf288d507c01613d32b65cd1"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>micro_thread</b></td></tr>
<tr class="separator:add347039cf288d507c01613d32b65cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><b>app</b> powers all micro++ web applications. </p>
<p>This class encapsulates all client-server communication, including routing. <b>app</b> is built upon Boost ASIO's io_service. It uses the io_service to asynchronously receive and reply to clients' requests. When a client's request comes in, the app object matches that request to a callback function, depending on the request's URI. <b>app</b> handles requests via a thread pool. That is, when a well-formed request arrives, the associate callback function is evaluated on a separate thread. <b>app</b> also monitors its thread pool. If any thread's execution surpasses the timeout, that thread will be cancelled, removed from the thread pool, and replaced. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acd97245a7ea7ed4abf75b7ea8b2545bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">micro::app::app </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>port</em> = <code>&quot;8080&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>address</em> = <code>&quot;0.0.0.0&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for a micro++ web application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>port number to listen for requests on. </td></tr>
    <tr><td class="paramname">address</td><td>address to listen for requests. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae4145e8f9539d65225c0ba1fb6ea325d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::add_route </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>route_specifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">callback&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>methods</em> = <code>{&quot;GET&quot;,&#160;&quot;POST&quot;,&#160;&quot;PUT&quot;,&#160;&quot;DELETE&quot;}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a callback function to the specified url. </p>
<p>When a client sends a request to the specified url endpoint, using any of the permitted methods, the callback function is called. Permitted methods default to GET, POST, PUT, and DELETE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">route_specifier</td><td>the URL to bind the function to. See tutorial for information on capturing url parameters. </td></tr>
    <tr><td class="paramname">func</td><td>the callback function, to be called when a client hits the URL endpoint. </td></tr>
    <tr><td class="paramname">methods</td><td>the allowable methods for this specific url endpoint, and this specific callback function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1fcc51d0124373d86d98d0a6a6cc343a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the web application and blocks until SIGINT (ctrl-c) is received. </p>
<p>It is intended for <a class="el" href="classmicro_1_1app.html#a1fcc51d0124373d86d98d0a6a6cc343a" title="Runs the web application and blocks until SIGINT (ctrl-c) is received. ">run()</a> to be called only after all url routes are bound to the application. </p>

</div>
</div>
<a class="anchor" id="a6b9175d0dfb4eff9238bda0eacb95ec2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::set_pool_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the thread pool size. </p>
<p>When a request is received, the callback function associated with it is processed on a separate thread. The thread pool size is the number of threads available to process incoming requests. By default, there is 1 thread in the thread pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>A positive number, indicating the number of threads to dedicate to the thread pool. If size is negative, the behavior is undefined. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="add07670b87b2dc2c7758aabdb365a2a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::set_static_root </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>static_root</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the static root directory - the directory in which all static files will be looked for. </p>
<p>When processing a client's request, micro++ will check the static root directory first, to see if the any static files match the URI. Static files include those that never change - such as css, images, etc. By default, the static root directory is ./static/</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">static_root</td><td>either the relative, or absolute pathname to the static root directory. Relative pathnames must begin with ./ or ../ </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="accc80d3512a4de218950e306a424b61f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::set_timeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the maximum time that the application is willing to wait for runaway threads to finish. </p>
<p>Any callback registered with the application will be allowed to run until the specified timeout. If a thread is not finished when the timeout is up, it will be killed and replaced by a new thread. In this scenario, the server will respond with status code 500, internal server error. By default, the timeout is 3 seconds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>maximum time (in seconds) a thread can run before it is terminated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a205e18d042be96f5268623e123a9f134"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::toggle_debug_mode </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>toggle</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggles debug mode. </p>
<p>When debug mode is on, all uncaught exceptions will be displayed in the browser. When debug mode is off, uncaught exceptions result in a 500, internal server error response. More debug features may arrive in the future. It is recommended to turn debug mode on in development, but turn it off in production. By default, debug mode is off.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toggle</td><td>if true, turns debug mode on. Else turns debug mode off. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abb88f6fae763dbab6d8bc44ad26ff673"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void micro::app::toggle_logging_mode </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>toggle</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Toggles logging mode. </p>
<p>When logging mode is on, all requests are logged to stdout. When logging mode is off, requests are not logged. To capture logging results in a file, it is recommended for users to redirect the output of the program to a log file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toggle</td><td>if true, turns logging mode on. Else turns logging mode off. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="app_8hpp_source.html">app.hpp</a></li>
<li>src/app.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 30 2015 22:30:20 for Micro++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
