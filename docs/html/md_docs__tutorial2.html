<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Micro++: Tutorial: Extending the bjarneblog with intermediate micro++ features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Micro++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial: Extending the bjarneblog with intermediate micro++ features </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Basic session handling with cookies</h2>
<p>In a blogging app, we might only want to let users share posts if they are logged in. Let’s create a very simple authentication system that will let users post entries for an hour if they log in with the correct hardcoded password.</p>
<p>First let’s create a fragment for a basic login prompt:</p>
<p><b>fragments/login.html</b></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;form action=&quot;login&quot; method=&quot;POST&quot; class=&quot;add-entry&quot;&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;dl&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;&lt;dt&gt;Name:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;&lt;dd&gt;&lt;input type=&quot;text&quot; size=&quot;30&quot; name=&quot;name&quot;&gt;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;&lt;dt&gt;Password:</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;&lt;dd&gt;&lt;input type=&quot;password&quot; size=&quot;30&quot; name=&quot;password&quot;&gt;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;&lt;dd&gt;&lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;&lt;/dl&gt;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;&lt;/form&gt;</div>
</div><!-- fragment --><p>Let’s also remove the name field in the new entry form:</p>
<p><b>new_entry_form.html</b></p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;form action=&quot;new&quot; method=&quot;POST&quot; class=&quot;add-entry&quot;&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;dl&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;&lt;dt&gt;Title:</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;&lt;dd&gt;&lt;input type=&quot;text&quot; size=&quot;30&quot; name=&quot;title&quot;&gt;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;&lt;dt&gt;Text:</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;&lt;dd&gt;&lt;textarea name=&quot;body&quot; rows=&quot;5&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;&lt;dd&gt;&lt;input type=&quot;submit&quot; value=&quot;Share&quot;&gt;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;&lt;/dl&gt;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;&lt;/form&gt;</div>
</div><!-- fragment --><p>Now we set up a callback for the “login” action. We want to conditionally display a login form or a new entry form on the homepage depending on whether or not you are logged in. We also want to make sure that the author's name of the new blog entries are set to the name set in the cookie from logging in.</p>
<p>Let’s start by defining a callback for <code>login</code> with the following changes to <code>blog_app.cpp</code>.</p>
<p>Add the following line to main before <code>app.run</code>: </p><div class="fragment"><div class="line">app.add_route(<span class="stringliteral">&quot;/login&quot;</span>, login, {<span class="stringliteral">&quot;POST&quot;</span>});</div>
</div><!-- fragment --><p>Add the following includes to the top of the file: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;micro/cookie.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctime&gt;</span></div>
</div><!-- fragment --><p>Add this constant in the top of the file: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> std::string blog_passwd = <span class="stringliteral">&quot;ILoveCplusplus&quot;</span>;</div>
</div><!-- fragment --><p>And finally add the following callback in the file: </p><div class="fragment"><div class="line"><a class="code" href="classmicro_1_1response.html">micro::response</a> login(<span class="keyword">const</span> <a class="code" href="classmicro_1_1request.html">micro::request</a>&amp; req) {</div>
<div class="line">    <a class="code" href="classmicro_1_1response.html">micro::response</a> resp;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;password&quot;</span>) == blog_passwd) {</div>
<div class="line">        <a class="code" href="classmicro_1_1cookie.html">micro::cookie</a> authenticated{<span class="stringliteral">&quot;auth&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>, std::time(<span class="keyword">nullptr</span>) + 3600};</div>
<div class="line">        <a class="code" href="classmicro_1_1cookie.html">micro::cookie</a> name_cookie{<span class="stringliteral">&quot;name&quot;</span>, req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;name&quot;</span>), <span class="stringliteral">&quot;/new&quot;</span>};</div>
<div class="line">        resp.<a class="code" href="classmicro_1_1response.html#ad40313a9367904ef3d3ad35f8c0e3d66">add_cookie</a>(authenticated);</div>
<div class="line">        resp.<a class="code" href="classmicro_1_1response.html#ad40313a9367904ef3d3ad35f8c0e3d66">add_cookie</a>(name_cookie);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="classmicro_1_1cookie.html">micro::cookie</a> authenticated{<span class="stringliteral">&quot;auth&quot;</span>, <span class="stringliteral">&quot;failed&quot;</span>, std::time(<span class="keyword">nullptr</span>) + 60};</div>
<div class="line">        resp.<a class="code" href="classmicro_1_1response.html#ad40313a9367904ef3d3ad35f8c0e3d66">add_cookie</a>(authenticated);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    resp.<a class="code" href="classmicro_1_1response.html#ad33c5cf35cef13c19b15edbb70c1f0d8">redirect</a>(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> resp;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The callback accepts a username and password as POST parameters, and authenticates the user if the credentials are correct.</p>
<p>If the post parameter given as the password matches the hard coded password, we will give the client a cookie that asserts that they are authenticated for one hour (current time + 3600 seconds), and a cookie with his or her name that was supplied in the POST param. This name cookie will only be sent to the server when the browser accesses the route “/new” as defined by the additional "path" paramter in the cookie constructor.</p>
<p>If the password doesn’t match, the client gets an authentication failed cookie for 60 seconds, where the homepage will notify the end user that authentication failed.</p>
<p>Obviously this is not secure whatsoever, but it’s a foundation on which you can build a more secure authentication system.</p>
<p>Now we just need to modify the homepage and <code>new_page</code> callbacks so that the user sees the appropriate prompt, and so that he or she can only post when authenticated.</p>
<p><b>blog_app.cpp</b> </p><div class="fragment"><div class="line"><a class="code" href="classmicro_1_1response.html">micro::response</a> homepage(<span class="keyword">const</span> <a class="code" href="classmicro_1_1request.html">micro::request</a> &amp;req) {</div>
<div class="line">    <a class="code" href="classmicro_1_1response.html">micro::response</a> resp;</div>
<div class="line">    std::ostringstream page;</div>
<div class="line"></div>
<div class="line">    render_fragment(page, <span class="stringliteral">&quot;fragments/header.html&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(req.<a class="code" href="classmicro_1_1request.html#a0fa6af8cf6c5036545d4766790e2950f">get_cookie</a>(<span class="stringliteral">&quot;auth&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span>) {</div>
<div class="line">        render_fragment(page, <span class="stringliteral">&quot;fragments/new_entry_form.html&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(req.<a class="code" href="classmicro_1_1request.html#a0fa6af8cf6c5036545d4766790e2950f">get_cookie</a>(<span class="stringliteral">&quot;auth&quot;</span>) == <span class="stringliteral">&quot;failed&quot;</span>) {</div>
<div class="line">        page &lt;&lt; <span class="stringliteral">&quot;&lt;strong&gt;Authentication failed!&lt;/strong&gt;&lt;br/&gt;&quot;</span>;</div>
<div class="line">        render_fragment(page, <span class="stringliteral">&quot;fragments/login.html&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        render_fragment(page, <span class="stringliteral">&quot;fragments/login.html&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    page &lt;&lt; <span class="stringliteral">&quot;&lt;ul class=\&quot;entries\&quot;&gt;&quot;</span>;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> entry = entries.rbegin(); entry != entries.rend(); ++entry)</div>
<div class="line">        page &lt;&lt; *entry;</div>
<div class="line">    page &lt;&lt; <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
<div class="line"></div>
<div class="line">    render_fragment(page, <span class="stringliteral">&quot;fragments/footer.html&quot;</span>);</div>
<div class="line"></div>
<div class="line">    resp.<a class="code" href="classmicro_1_1response.html#a2df7cb34f7700a040e1cf7d41360abf4">render_string</a>(page.str());</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> resp;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="classmicro_1_1response.html">micro::response</a> new_entry(<span class="keyword">const</span> <a class="code" href="classmicro_1_1request.html">micro::request</a> &amp;req) {</div>
<div class="line">    <a class="code" href="classmicro_1_1response.html">micro::response</a> resp;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(req.<a class="code" href="classmicro_1_1request.html#a0fa6af8cf6c5036545d4766790e2950f">get_cookie</a>(<span class="stringliteral">&quot;auth&quot;</span>) == <span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">        &amp;&amp; !req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;body&quot;</span>).empty()</div>
<div class="line">        &amp;&amp; !req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;title&quot;</span>).empty())</div>
<div class="line">    {</div>
<div class="line">        blog_entry new_entry{req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;title&quot;</span>), req.<a class="code" href="classmicro_1_1request.html#a766d90161e6b77c87a22f53f52541daa">get_post_param</a>(<span class="stringliteral">&quot;body&quot;</span>), req.<a class="code" href="classmicro_1_1request.html#a0fa6af8cf6c5036545d4766790e2950f">get_cookie</a>(<span class="stringliteral">&quot;name&quot;</span>)};</div>
<div class="line">        entries.push_back(new_entry);</div>
<div class="line">    }</div>
<div class="line">    resp.<a class="code" href="classmicro_1_1response.html#ad33c5cf35cef13c19b15edbb70c1f0d8">redirect</a>(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> resp;</div>
<div class="line">}</div>
</div><!-- fragment --><p>As you can see in <code>homepage</code>, we’ve added an if-else chain that selectively renders a login form, a login form and authentication error, or a new entry form.</p>
<p>In <code>new_entry</code>, we’ve changed the author to <code>req.get_cookie(“name”)</code>, and we only create a new entry if the client is authenticated.</p>
<p>With the theme of adding more security to the app, we’ve also put checks on the title and body to ensure that users can’t make posts with empty parameters.</p>
<p>Now we have a simple, nice-looking blogging app with basic authentication!</p>
<h2>Producing permalinks to blog entries with URL route params</h2>
<p>If a user sees a blog post that they want to remember for future reference, it would be nice if they could get a permanent link to it. We can easily accomplish this with URL route parameters.</p>
<p>Let’s create a new route and callback so the end user can access a blog entry by its id.</p>
<p>First create the following route specification in <code>main()</code></p>
<div class="fragment"><div class="line">app.add_route(<span class="stringliteral">&quot;/entry/&lt;int:id&gt;&quot;</span>, get_entry);</div>
</div><!-- fragment --><p>This creates a route that will accept URLs in the form of <code>/entry/1235</code> or <code>/entry/897</code>. The “id” value will be available in the <code><a class="el" href="classmicro_1_1request.html" title="The request object provides an API that allows developers access to data from a HTTP request...">micro::request</a></code> passed into the callback by accessing <code>req.get_route_param(“id”)</code>.</p>
<p>You can do it like this:</p>
<div class="fragment"><div class="line"><a class="code" href="classmicro_1_1response.html">micro::response</a> get_entry(<span class="keyword">const</span> <a class="code" href="classmicro_1_1request.html">micro::request</a> &amp;req) {</div>
<div class="line">    <a class="code" href="classmicro_1_1response.html">micro:: response</a> resp;</div>
<div class="line">    std::ostringstream page;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = std::stoi(req.<a class="code" href="classmicro_1_1request.html#abf876c40eb23e0e440a558534eb820a8">get_route_param</a>(<span class="stringliteral">&quot;id&quot;</span>));</div>
<div class="line"></div>
<div class="line">    render_fragment(page, <span class="stringliteral">&quot;fragments/header.html&quot;</span>);</div>
<div class="line">    page &lt;&lt; <span class="stringliteral">&quot;&lt;a href=\&quot;/\&quot;&gt;&lt;&lt; Homepage&lt;/a&gt;&lt;br/&gt;&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(<span class="keywordtype">id</span> &gt; entries.size() || <span class="keywordtype">id</span> &lt; 1) {</div>
<div class="line">        page &lt;&lt; <span class="stringliteral">&quot;&lt;br/&gt;&lt;h2&gt;404 - Entry not found &lt;/h2&gt;&quot;</span>;</div>
<div class="line">        render_fragment(page, <span class="stringliteral">&quot;fragments/footer.html&quot;</span>);</div>
<div class="line">        resp.<a class="code" href="classmicro_1_1response.html#a0c9bc99be79a0e6f6d8dd232b9b3600a">render_status</a>(404, page.str());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        page &lt;&lt; <span class="stringliteral">&quot;&lt;ul class=\&quot;entries\&quot;&gt;&quot;</span>;</div>
<div class="line">        page &lt;&lt; entries[<span class="keywordtype">id</span> - 1];</div>
<div class="line">        page &lt;&lt; <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
<div class="line">        render_fragment(page, <span class="stringliteral">&quot;fragments/footer.html&quot;</span>);</div>
<div class="line">        resp.<a class="code" href="classmicro_1_1response.html#a2df7cb34f7700a040e1cf7d41360abf4">render_string</a>(page.str());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> resp;</div>
<div class="line">}</div>
</div><!-- fragment --><p>As you can see, we still render a blog entry as a list even though it is only one entry. This helps maintain nice CSS formatting. If the requested entry id is not found, we render a 404 status with the custom message. Now, if you have three entries in the blog, visiting <code>localhost:8080/entry/2</code> will give you the second entry on a nicely formatted page. We just need to give users this permalink by changing the for loop in the <code>homepage</code> callback to this:</p>
<div class="fragment"><div class="line">page &lt;&lt; <span class="stringliteral">&quot;&lt;ul class=\&quot;entries\&quot;&gt;&quot;</span>;</div>
<div class="line"><span class="keywordtype">int</span> i = entries.size();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> entry = entries.rbegin(); entry != entries.rend(); ++entry) {</div>
<div class="line">    page &lt;&lt; *entry;</div>
<div class="line">    page &lt;&lt; <span class="stringliteral">&quot;&lt;a href=/entry/&quot;</span> &lt;&lt; i-- &lt;&lt; <span class="stringliteral">&quot;&gt;Permalink&lt;/a&gt;&lt;br/&gt;&quot;</span>;</div>
<div class="line">}</div>
<div class="line">page &lt;&lt; <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
</div><!-- fragment --><p>Now, each entry on the homepage will come with an associated permalink that actually works! If you want to make this look prettier (or you just want more practice with micro++), try embedding the entry id in blog_entry object, and making the title of the rendered blog entry a link to the correct permalink.</p>
<h2>Displaying all of the articles written by a certain user with GET params</h2>
<p>It would also be nice if you could easily get all of the blog entries written by a particular user. We’re going to accomplish this with query string GET parameters. By doing this, we don’t even need to add any callbacks. By the end of this section, the query <code>localhost:8080/?u=Bjarne</code> should only display blog entries written by the user Bjarne.</p>
<p>This is actually extremely simple. Go to the <code>homepage</code> callback and make the following modifications to the main for loop</p>
<div class="fragment"><div class="line">page &lt;&lt; <span class="stringliteral">&quot;&lt;ul class=\&quot;entries\&quot;&gt;&quot;</span>;</div>
<div class="line">    <span class="keywordtype">int</span> i = entries.size();</div>
<div class="line">    <span class="keyword">auto</span> user = req.<a class="code" href="classmicro_1_1request.html#af4e74a331ce71bcb481e006ef4047545">get_query_param</a>(<span class="stringliteral">&quot;u&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> entry = entries.rbegin(); entry != entries.rend(); ++entry) {</div>
<div class="line">        <span class="keywordflow">if</span>(user == <span class="stringliteral">&quot;&quot;</span> || user == entry-&gt;get_author()) {</div>
<div class="line">            page &lt;&lt; *entry;</div>
<div class="line">            page &lt;&lt; <span class="stringliteral">&quot;&lt;a href=/entry/&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;&gt;Permalink&lt;/a&gt;&lt;br/&gt;&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        --i;</div>
<div class="line">    }</div>
<div class="line">    page &lt;&lt; <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
</div><!-- fragment --><p>and add the following method definition in <code>blog_entry.hpp</code> </p><div class="fragment"><div class="line">std::string get_author() { <span class="keywordflow">return</span> author; }</div>
</div><!-- fragment --><p>Here you can see we get the query_param “u”, and if it isn’t blank, we only display entries where the author matches the “u” param. Notice that we moved the i decrement out of the if statement so that proper permalinks are still dsplayed.</p>
<p>Now you can simply type “localhost:8080/?u=SomeUser” in your browser and you’ll get selective results.</p>
<p>As an exercise, try building a search bar on the homepage that will send a get request to the homepage with the u query so that users can easily search for posts from their favorite authors.</p>
<h2>Concluding Remarks</h2>
<p>Congratulations on finishing the tutorial! We hope you have enjoyed the micro++ tutorial and use it to make a web application of your own.</p>
<p>You can view all the source code for the completed tutorial in <code>example_webapps/tutorial/</code> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 30 2015 22:30:20 for Micro++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
